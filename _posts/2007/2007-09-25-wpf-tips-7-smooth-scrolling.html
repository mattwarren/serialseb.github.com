---
layout: post
serial: wpf-tips-n-tricks
title: WPF Tips n' Tricks â€“ Smooth(er) scrolling
date: '2007-09-25T00:06:00.001+01:00'
redirect_from: "blog/2007/09/24/wpf-tips-7-smooth-scrolling/"
tags:
 - .net35
 - WPF
 - .net3
modified_time: '2007-09-27T11:08:51.686+01:00'
blogger_id: tag:blogger.com,1999:blog-4015568221071268916.post-459317014725733249
comments: true
blogger_orig_url: http://serialseb.blogspot.com/2007/09/wpf-tips-7-smooth-scrolling.html
---

<p>A common request with ListViews and other scrollable components is to have a smoother scrolling. By default, when a scrollable control contains items that control their own scrolling, it jumps from one item to the other, by the whole item height. It's not smooth because it's not animated, a step back in usability that I still cannot explain (lack of time maybe?)</p> <p>The culprits are mainly the Panels like StackPanel and <a href="http://msdn2.microsoft.com/System.Windows.Controls.ScrollContentPresenter" rel="nofollow">ScrollContentPresenter</a> that don't implement smooth scrolling animations. While&nbsp;changing their behavior to support smooth animation is a way to solve the issue,&nbsp;and it may well be that I start implementing it for a future Tips'n'Tricks, but for now it's&nbsp;out of scope for this entry.</p> <p>So how to prevent this jumpy behavior? Don't let the content decide how it's going to scroll! It's very easily accomplished, by adding the <a href="http://msdn2.microsoft.com/System.Windows.Controls.ScrollViewer.CanContentScroll" rel="nofollow">ScrollViewer.CanContentScroll</a> attached property and setting it to <strong>false</strong>. Here's a small example:</p> <div style="border-right: gray 1px solid; padding-right: 4px; border-top: gray 1px solid; padding-left: 4px; font-size: 8pt; padding-bottom: 4px; margin: 20px 0px 10px; overflow: auto; border-left: gray 1px solid; width: 97.5%; cursor: text; line-height: 12pt; padding-top: 4px; border-bottom: gray 1px solid; font-family: consolas, 'Courier New', courier, monospace; background-color: #f4f4f4; max-height: 200px"><pre style="padding-right: 0px; padding-left: 0px; font-size: 8pt; padding-bottom: 0px; margin: 0em; overflow: visible; width: 100%; color: black; border-top-style: none; line-height: 12pt; padding-top: 0px; font-family: consolas, 'Courier New', courier, monospace; border-right-style: none; border-left-style: none; background-color: #f4f4f4; border-bottom-style: none"><span style="color: #0000ff">&lt;</span><span style="color: #800000">Window</span> <br>    <span style="color: #ff0000">xmlns</span><span style="color: #0000ff">="http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span><br>    <span style="color: #ff0000">xmlns:x</span><span style="color: #0000ff">="http://schemas.microsoft.com/winfx/2006/xaml"</span><br>    <span style="color: #ff0000">Title</span><span style="color: #0000ff">="Smooth Scrolling Demo"</span> <span style="color: #ff0000">Height</span><span style="color: #0000ff">="300"</span> <span style="color: #ff0000">Width</span><span style="color: #0000ff">="300"</span><span style="color: #0000ff">&gt;</span><br>    <span style="color: #0000ff">&lt;</span><span style="color: #800000">Grid</span><span style="color: #0000ff">&gt;</span><br>        <span style="color: #0000ff">&lt;</span><span style="color: #800000">ListBox</span> <span style="color: #ff0000">ScrollViewer</span>.<span style="color: #ff0000">CanContentScroll</span><span style="color: #0000ff">="False"</span><span style="color: #0000ff">&gt;</span><br>  <br>            <span style="color: #0000ff">&lt;</span><span style="color: #800000">ListBox.Items</span><span style="color: #0000ff">&gt;</span><br>                <span style="color: #0000ff">&lt;</span><span style="color: #800000">TextBlock</span> <span style="color: #ff0000">Height</span><span style="color: #0000ff">="40"</span><span style="color: #0000ff">&gt;</span>Text1<span style="color: #0000ff">&lt;/</span><span style="color: #800000">TextBlock</span><span style="color: #0000ff">&gt;</span><br>                <span style="color: #0000ff">&lt;</span><span style="color: #800000">TextBlock</span> <span style="color: #ff0000">Height</span><span style="color: #0000ff">="40"</span><span style="color: #0000ff">&gt;</span>Text2<span style="color: #0000ff">&lt;/</span><span style="color: #800000">TextBlock</span><span style="color: #0000ff">&gt;</span><br>                <span style="color: #0000ff">&lt;</span><span style="color: #800000">TextBlock</span> <span style="color: #ff0000">Height</span><span style="color: #0000ff">="40"</span><span style="color: #0000ff">&gt;</span>Text3<span style="color: #0000ff">&lt;/</span><span style="color: #800000">TextBlock</span><span style="color: #0000ff">&gt;</span><br>                <span style="color: #0000ff">&lt;</span><span style="color: #800000">TextBlock</span> <span style="color: #ff0000">Height</span><span style="color: #0000ff">="40"</span><span style="color: #0000ff">&gt;</span>Text4<span style="color: #0000ff">&lt;/</span><span style="color: #800000">TextBlock</span><span style="color: #0000ff">&gt;</span><br>                <span style="color: #0000ff">&lt;</span><span style="color: #800000">TextBlock</span> <span style="color: #ff0000">Height</span><span style="color: #0000ff">="40"</span><span style="color: #0000ff">&gt;</span>Text5<span style="color: #0000ff">&lt;/</span><span style="color: #800000">TextBlock</span><span style="color: #0000ff">&gt;</span><br>                <span style="color: #0000ff">&lt;</span><span style="color: #800000">TextBlock</span> <span style="color: #ff0000">Height</span><span style="color: #0000ff">="40"</span><span style="color: #0000ff">&gt;</span>Text6<span style="color: #0000ff">&lt;/</span><span style="color: #800000">TextBlock</span><span style="color: #0000ff">&gt;</span><br>                <span style="color: #0000ff">&lt;</span><span style="color: #800000">TextBlock</span> <span style="color: #ff0000">Height</span><span style="color: #0000ff">="40"</span><span style="color: #0000ff">&gt;</span>Text7<span style="color: #0000ff">&lt;/</span><span style="color: #800000">TextBlock</span><span style="color: #0000ff">&gt;</span><br>                <span style="color: #0000ff">&lt;</span><span style="color: #800000">TextBlock</span> <span style="color: #ff0000">Height</span><span style="color: #0000ff">="40"</span><span style="color: #0000ff">&gt;</span>Text8<span style="color: #0000ff">&lt;/</span><span style="color: #800000">TextBlock</span><span style="color: #0000ff">&gt;</span><br>                <span style="color: #0000ff">&lt;</span><span style="color: #800000">TextBlock</span> <span style="color: #ff0000">Height</span><span style="color: #0000ff">="40"</span><span style="color: #0000ff">&gt;</span>Text9<span style="color: #0000ff">&lt;/</span><span style="color: #800000">TextBlock</span><span style="color: #0000ff">&gt;</span><br>                <span style="color: #0000ff">&lt;</span><span style="color: #800000">TextBlock</span> <span style="color: #ff0000">Height</span><span style="color: #0000ff">="40"</span><span style="color: #0000ff">&gt;</span>Text10<span style="color: #0000ff">&lt;/</span><span style="color: #800000">TextBlock</span><span style="color: #0000ff">&gt;</span><br>            <span style="color: #0000ff">&lt;/</span><span style="color: #800000">ListBox.Items</span><span style="color: #0000ff">&gt;</span><br>        <span style="color: #0000ff">&lt;/</span><span style="color: #800000">ListBox</span><span style="color: #0000ff">&gt;</span><br>    <span style="color: #0000ff">&lt;/</span><span style="color: #800000">Grid</span><span style="color: #0000ff">&gt;</span><br><span style="color: #0000ff">&lt;/</span><span style="color: #800000">Window</span><span style="color: #0000ff">&gt;</span><br></pre></div>
<p>[Update]<br>Ronan is absolutely correct in pointing out in my comments:</p>
<blockquote>
<p>There's a drawback when using this trick: when ScrollViewer.CanContentScroll is set you loose default scrolling behaviour of the ListBox which uses a VirtualStackPanel. On big collections you will notice a great performance degradation.</p></blockquote>
<p>This is a complete oversight in this tips'n'tricks. Virtualization means that only visible items within a list will be created and added to the visual tree. Not an issue for a few items, but when you reach the hundreds or thousands, it becomes a necessity. When you set the CanContentScroll property, the virtualizing stack panel stops virtualizing and renders everything. Be aware of that!</p>
<p>And as is also pointed in that comment, making a smooth scrolling *virtualizing* panel is even harder.</p>
<p>
<div class="wlWriterSmartContent" id="0767317B-992E-4b12-91E0-4F059A8CECA8:9bd52b47-b513-4cac-a2a0-480b0a84773f" contenteditable="false" style="padding-right: 0px; display: inline; padding-left: 0px; padding-bottom: 0px; margin: 0px; padding-top: 0px">Technorati Tags: <a href="http://technorati.com/tags/.net3" rel="tag">.net3</a>, <a href="http://technorati.com/tags/.net35" rel="tag">.net35</a>, <a href="http://technorati.com/tags/wpf" rel="tag">wpf</a></div></p>
