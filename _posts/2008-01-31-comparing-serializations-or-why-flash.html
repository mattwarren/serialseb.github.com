---
layout: post
title: Comparing serializations, or why Flash Remoting is not as efficient as some
  would imply
date: '2008-01-31T11:32:00.001Z'
author: Sebastien Lambla
tags: 
modified_time: '2008-01-31T16:56:27.903Z'
thumbnail: http://lh3.google.com/TheTechnologist/R6Gx6GSxZxI/AAAAAAAAABs/MyzVJkAPAYk/s72-c/image%5B4%5D
blogger_id: tag:blogger.com,1999:blog-4015568221071268916.post-4116911028690617287
blogger_orig_url: http://serialseb.blogspot.com/2008/01/comparing-serializations-or-why-flash.html
---

<p><em>[Updated: Added reference to which classes were being used. The DataContractJsonSerializer is part of the .net 3.5 release.]</em></p>  <p>There's been a few discussions recently about the cost of using JSON against using Flash Remoting. Its a fact of life to have to discuss those issues when you work with a lot of Adobe people, especially when you're the Microsoft guys.</p>  <p>One of the discussions is around the performance of JSON and Flash Remoting. There is the <a href="http://www.jamesward.org/blazebench/">BlazeBench</a> application that would imply AMF wins hands down in every configuration. BlazeDS is a Java server that Adobe is apparently open-sourcing, but me being an asp.net guy, I wanted to see for myself what all this meant.</p>  <p>You see, in terms of architecture, you will always have a service layer, be it in the shape of a REST api, SOAP endpoints or a flash remoting object that pulls DTOs for display by the application. The difference between each of those solutions is going to be in the serialization mechanism you use. So I wrote a small application that compares the time it takes to serialize objects using the following:</p>  <ul>   <li>Asp.net JSON using <a href="http://msdn2.microsoft.com/system.web.script.serialization.javascriptserializer">System.Web.Script.Serialization.JavaScriptSerializer</a></li>    <li>WCF JSON using <a href="http://msdn2.microsoft.com/System.Runtime.Serialization.Json.DataContractJsonSerializer">System.Runtime.Serialization.Json.DataContractJsonSerializer</a> [part of Orcas]</li>    <li> AMF FlashMX using FlashGateway.IO.AMFWriter</li>    <li>.net binary using <a href="http://msdn2.microsoft.com/System.Runtime.Serialization.Formatters.Binary.BinaryFormatter">System.Runtime.Serialization.Formatters.Binary.BinaryFormatter</a></li>    <li>Xml using <a href="http://msdn2.microsoft.com/System.Runtime.Serialization.DataContractSerializer">System.Runtime.Serialization.DataContractSerializer</a></li>    <li>Xml using <a href="http://msdn2.microsoft.com/System.Xml.Serialization.XmlSerializer">System.Xml.Serialization.XmlSerializer</a></li> </ul>  <p>I've not done anything special to optimise any scenario and the object graph is the same. I serialize 1,000, 10,000 and 100,000 graphs with each of the serializers, everything is built first before running the test, everything is serialized to a MemoryStream.</p>  <p>This is what i get.</p>  <p><img style="border-top-width: 0px; border-left-width: 0px; border-bottom-width: 0px; border-right-width: 0px" height="485" alt="image" src="http://lh3.google.com/TheTechnologist/R6Gx6GSxZxI/AAAAAAAAABs/MyzVJkAPAYk/image%5B4%5D" width="883" border="0" /> </p>  <p>The big surprise for me was the binary serialization using BinaryFormatter, which is nearly as slow as the XmlSerializer. </p>  <p>More important for this study, the serialization cost of the WCF JSON serializer is only 300 milliseconds, for 100,000 objects. </p>  <p>With those results in hand, I will argue that there is no real performance gaps between WCF JSON, Flash AMF and XML DataContracts. Even with the asp.net AJAX extensions JSON serializer, the cost of serializing your graph is probably going to be a fraction of the cost of retrieving such an object graph from a database.</p>  <p>If anyone wants the source code, I'll be more than happy to publish it, provided my client allows it.</p>  